!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).jsConfetti=e()}(this,(function(){"use strict";function t(t,e,i=0){const s=Math.random()*(e-t)+t;return Math.floor(s*Math.pow(10,i))/Math.pow(10,i)}const e=6,i=80,s=250,o=40,n=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function a(t){return[...t].sort((()=>.5-Math.random()))[0]}function h(t){return Math.log(t)/Math.log(1920)}const r=new Map;class c{constructor(e){const{initialPosition:i,direction:s,confettiRadius:o,confettiColors:n,emojis:c,emojiSize:d,canvasWidth:l}=e,u=t(.9,1.7,3)*h(l);this.confettiSpeed={x:u,y:u},this.finalConfettiSpeedX=t(.2,.6,3),this.rotationSpeed=c.length?.01:t(.03,.07,3)*h(l),this.dragForceCoefficient=t(5e-4,9e-4,6),this.radius={x:o,y:o},this.initialRadius=o,this.rotationAngle="left"===s?t(0,.2,3):t(-.2,0,3),this.emojiSize=d,this.emojiRotationAngle=t(0,2*Math.PI),this.radiusYUpdateDirection="down";const f="left"===s?t(82,15)*Math.PI/180:t(-15,-82)*Math.PI/180;this.absCos=Math.abs(Math.cos(f)),this.absSin=Math.abs(Math.sin(f));const m=t(-150,0),p={x:i.x+("left"===s?-m:m)*this.absCos,y:i.y-m*this.absSin};this.currentPosition=Object.assign({},p),this.initialPosition=Object.assign({},p),this.color=c.length?null:a(n),this.emoji=c.length?a(c):null,this.canvas=r.get(`${this.emoji}:${d}`),this.emoji&&!this.canvas&&(this.canvas=function(t,e){const i=document.createElement("canvas");i.width=2*e,i.height=2*e;const s=i.getContext("2d");s.font=`${e}px serif`,s.textAlign="center",s.textBaseline="middle";let{actualBoundingBoxAscent:o,actualBoundingBoxDescent:n}=s.measureText(t);return s.fillText(t,e/2,e/2+(o-n)/2),s.save(),i}(this.emoji,d),r.set(`${this.emoji}:${d}`,this.canvas)),this.createdAt=(new Date).getTime(),this.direction=s}draw(t){const{currentPosition:e,radius:i,color:s,emoji:o,rotationAngle:n,emojiRotationAngle:a,emojiSize:h,canvas:r}=this,c=window.devicePixelRatio;s?(t.fillStyle=s,t.beginPath(),t.ellipse(e.x*c,e.y*c,i.x*c,i.y*c,n,0,2*Math.PI),t.fill()):o&&(t.save(),t.translate(c*e.x,c*e.y),t.rotate(a),t.drawImage(r,0,0),t.restore())}updatePosition(t,e){const{confettiSpeed:i,dragForceCoefficient:s,finalConfettiSpeedX:o,radiusYUpdateDirection:n,rotationSpeed:a,createdAt:h,direction:r}=this,c=e-h;i.x>o&&(this.confettiSpeed.x-=s*t),this.currentPosition.x+=i.x*("left"===r?-this.absCos:this.absCos)*t,this.currentPosition.y=this.initialPosition.y-i.y*this.absSin*c+.00125*Math.pow(c,2)/2,this.rotationSpeed-=this.emoji?1e-4:1e-5*t,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji?this.emojiRotationAngle+=this.rotationSpeed*t%(2*Math.PI):"down"===n?(this.radius.y-=t*a,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=t*a,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}getIsVisibleOnCanvas(t){return this.currentPosition.y<t+100}}function d(t){const e=document.createElement("canvas"),i=screen.width>screen.height?screen.height:screen.width;return e.style.position="fixed",e.style.width=`${i}px`,e.style.height=`${i}px`,e.style.bottom="0",t&&"right"===t?e.style.right="0":e.style.left="0",e.style.zIndex="1000",e.style.pointerEvents="none",document.body.appendChild(e),e}class l{constructor(t){this.canvasContext=t,this.shapes=[],this.promise=new Promise((t=>this.resolvePromise=t))}getBatchCompletePromise(){return this.promise}addShapes(...t){this.shapes.push(...t)}complete(){var t;return!this.shapes.length&&(null===(t=this.resolvePromise)||void 0===t||t.call(this),!0)}processShapes(t,e,i){const{timeDelta:s,currentTime:o}=t;this.shapes=this.shapes.filter((t=>(t.updatePosition(s,o),t.draw(this.canvasContext),!i||t.getIsVisibleOnCanvas(e))))}}return class{constructor(t={}){this.activeConfettiBatches=[];const[e,i]=[d("right"),d("left")];this.canvasLeft=e,this.canvasRight=i,this.canvasLeftContext=this.canvasLeft.getContext("2d"),this.canvasRightContext=this.canvasRight.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=(new Date).getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}loop(){this.requestAnimationFrameRequested=!1,function(t){const e=window.devicePixelRatio,i=getComputedStyle(t[0]),s=parseInt(i.getPropertyValue("width")),o=parseInt(i.getPropertyValue("height")),n=Math.min(s,o);t.forEach((t=>{t.setAttribute("width",(n*e).toString()),t.setAttribute("height",(n*e).toString())}))}([this.canvasLeft,this.canvasRight]);const t=(new Date).getTime(),e=t-this.lastUpdated,i=this.canvasLeft.offsetHeight,s=this.iterationIndex%10==0;this.activeConfettiBatches=this.activeConfettiBatches.filter((o=>(o.processShapes({timeDelta:e,currentTime:t},i,s),!s||!o.complete()))),this.iterationIndex++,this.queueAnimationFrameIfNeeded(t)}queueAnimationFrameIfNeeded(t){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=t||(new Date).getTime(),requestAnimationFrame(this.loop))}addConfetti(t={}){const{confettiRadius:a,confettiNumber:h,confettiColors:r,emojis:d,emojiSize:u}=function(t){const{confettiRadius:a=e,confettiNumber:h=t.confettiesNumber||(t.emojis?o:s),confettiColors:r=n,emojis:c=t.emojies||[],emojiSize:d=i}=t;return t.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),t.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:a,confettiNumber:h,confettiColors:r,emojis:c,emojiSize:d}}(t),f=this.canvasLeft.getBoundingClientRect(),m=f.width,p=5*f.height/7,g={x:0,y:p},v={x:m,y:p},C=new l(this.canvasLeftContext),x=new l(this.canvasRightContext);for(let t=0;t<h/2;t++){const t=new c({initialPosition:g,direction:"right",confettiRadius:a,confettiColors:r,confettiNumber:h,emojis:d,emojiSize:u,canvasWidth:m}),e=new c({initialPosition:v,direction:"left",confettiRadius:a,confettiColors:r,confettiNumber:h,emojis:d,emojiSize:u,canvasWidth:m});x.addShapes(t),C.addShapes(e)}return this.activeConfettiBatches.push(x,C),this.queueAnimationFrameIfNeeded(),Promise.all([x.getBatchCompletePromise(),C.getBatchCompletePromise()])}clearCanvas(){this.activeConfettiBatches=[]}destroyCanvas(){this.canvasLeft.remove(),this.canvasRight.remove()}}}));
